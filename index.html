<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>UPI QR Studio</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>

<style>
body{
  font-family:system-ui,sans-serif;
  background:linear-gradient(135deg,#020617,#0f172a);
  color:#e5e7eb;
  min-height:100vh;
  margin:0;
  display:flex;
  justify-content:center;
  align-items:center;
}
.container{
  max-width:460px;
  width:100%;
  background:#020617;
  padding:22px;
  border-radius:18px;
  box-shadow:0 0 50px rgba(0,0,0,.7);
}
h1{text-align:center;margin-bottom:6px}
.sub{text-align:center;font-size:13px;opacity:.7;margin-bottom:14px}

label{font-size:13px;margin-top:10px;display:block}
input,select{
  width:100%;
  padding:10px;
  margin-top:6px;
  border-radius:10px;
  border:none;
  font-size:15px;
}

.qr-wrap{
  background:#fff;
  margin-top:18px;
  padding:18px;
  border-radius:16px;
  text-align:center;
  position:relative;
}

#merchant{
  font-weight:700;
  font-size:18px;
}
#tagline{
  font-size:13px;
  color:#444;
  margin:6px 0;
}
#amountBadge{
  display:none;
  background:#16a34a;
  color:#fff;
  padding:4px 12px;
  border-radius:999px;
  font-size:13px;
  margin-bottom:8px;
}

#logoPreview{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:64px;
  height:64px;
  border-radius:14px;
  display:none;
  background:#fff;
  object-fit:contain;
}

button{
  width:100%;
  margin-top:14px;
  padding:12px;
  border:none;
  border-radius:12px;
  font-size:16px;
  background:linear-gradient(90deg,#2563eb,#4f46e5);
  color:#fff;
  cursor:pointer;
}

.footer{
  text-align:center;
  font-size:12px;
  opacity:.65;
  margin-top:12px;
}
</style>
</head>

<body>

<div class="container">
<h1>üí≥ UPI QR Studio</h1>
<div class="sub">Instant ‚Ä¢ Secure ‚Ä¢ No History</div>

<label>Direct UPI URL</label>
<input id="directUrl" placeholder="upi://pay?pa=example@upi" oninput="updateQR()">

<label>OR Manual Details</label>

<label>UPI ID</label>
<input id="upi" oninput="updateQR()">

<label>Merchant Name</label>
<input id="name" oninput="updateQR()">

<label>Amount ‚Çπ</label>
<input id="amount" type="number" oninput="updateQR()">

<label>Note</label>
<input id="note" oninput="updateQR()">

<label>QR Shape</label>
<select id="style" onchange="updateQR()">
  <option value="square">Square</option>
  <option value="rounded">Rounded</option>
</select>

<label>QR Color</label>
<input id="color1" type="color" value="#000000" oninput="updateQR()">

<label>Background Style</label>
<select id="bgStyle">
  <option value="white">White</option>
  <option value="gradient">Gradient</option>
  <option value="image">Custom Image</option>
</select>

<label>Background Image (optional)</label>
<input type="file" accept="image/*" onchange="loadBackground(event)">

<label>Center Logo (optional)</label>
<input type="file" accept="image/*" onchange="loadLogo(event)">

<div class="qr-wrap" id="card">
  <div id="merchant"></div>
  <div id="tagline">Scan & Pay using any UPI App</div>
  <div id="amountBadge"></div>
  <div id="qrcode"></div>
  <img id="logoPreview">
</div>

<button onclick="downloadCard()">‚¨á Download QR Card</button>
<button onclick="downloadA4()">üñ®Ô∏è Download A4 Poster</button>

<div class="footer">Client-side only ‚Ä¢ No data saved</div>
</div>

<script>
let bgImage=null;

function buildUPI(){
  if(directUrl.value.startsWith("upi://")) return directUrl.value.trim();
  if(!upi.value.trim()) return "";
  let u=`upi://pay?pa=${upi.value.trim()}&cu=INR`;
  if(name.value) u+=`&pn=${encodeURIComponent(name.value)}`;
  if(amount.value) u+=`&am=${amount.value}`;
  if(note.value) u+=`&tn=${encodeURIComponent(note.value)}`;
  return u;
}

function updateQR(){
  const data=buildUPI();
  if(!data) return;

  qrcode.innerHTML="";
  merchant.innerText=name.value||"MERCHANT NAME";

  amountBadge.style.display=amount.value?"inline-block":"none";
  amountBadge.innerText=amount.value?`‚Çπ ${amount.value}`:"";

  new QRCode(qrcode,{
    text:data,
    width:260,
    height:260,
    colorDark:color1.value,
    colorLight:"#ffffff",
    correctLevel:QRCode.CorrectLevel.H
  });
}

function loadLogo(e){
  const f=e.target.files[0];
  if(!f) return;
  logoPreview.src=URL.createObjectURL(f);
  logoPreview.style.display="block";
}

function loadBackground(e){
  const f=e.target.files[0];
  if(!f) return;
  bgImage=URL.createObjectURL(f);
}

function renderCanvas(width,height){
  const c=document.createElement("canvas");
  const ctx=c.getContext("2d");
  c.width=width;
  c.height=height;

  if(bgStyle.value==="gradient"){
    const g=ctx.createLinearGradient(0,0,0,height);
    g.addColorStop(0,"#ffffff");
    g.addColorStop(1,"#e5e7eb");
    ctx.fillStyle=g;
  }else{
    ctx.fillStyle="#ffffff";
  }
  ctx.fillRect(0,0,width,height);

  if(bgStyle.value==="image" && bgImage){
    const img=new Image();
    img.src=bgImage;
    ctx.drawImage(img,0,0,width,height);
  }

  const qr=document.querySelector("#qrcode canvas");
  ctx.drawImage(qr,(width-320)/2,220,320,320);

  if(logoPreview.style.display==="block"){
    const s=90;
    ctx.drawImage(logoPreview,(width-s)/2,220+(320-s)/2,s,s);
  }

  ctx.textAlign="center";
  ctx.fillStyle="#111";
  ctx.font="bold 40px system-ui";
  ctx.fillText(merchant.innerText,width/2,120);

  if(amount.value){
    ctx.fillStyle="#16a34a";
    ctx.font="28px system-ui";
    ctx.fillText(`‚Çπ ${amount.value}`,width/2,170);
  }

  return c;
}

function downloadCard(){
  const c=renderCanvas(900,1200);
  const a=document.createElement("a");
  a.href=c.toDataURL("image/png");
  a.download="upi_qr_card.png";
  a.click();
}

function downloadA4(){
  const c=renderCanvas(2480,3508);
  const a=document.createElement("a");
  a.href=c.toDataURL("image/png");
  a.download="upi_qr_a4.png";
  a.click();
}
</script>

</body>
</html>
